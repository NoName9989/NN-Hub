-- Nếu GUI đã tồn tại thì xoá
if game.CoreGui:FindFirstChild("NNHubGlassUI") then
	game.CoreGui.NNHubGlassUI:Destroy()
end

-- NN Hub Glass UI - With Confirmation Box
local UserInputService = game:GetService("UserInputService")

local OpenKey = Enum.KeyCode.RightShift
local visible = true

-- GUI Base
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NNHubGlassUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.Size = UDim2.new(0, 420, 0, 300)
MainFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
MainFrame.BackgroundTransparency = 0.25
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true

local defaultPos = MainFrame.Position

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

-- Semi-transparent Glass Layer
local GlassLayer = Instance.new("Frame")
GlassLayer.Parent = MainFrame
GlassLayer.Size = UDim2.new(1, 0, 1, 0)
GlassLayer.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
GlassLayer.BackgroundTransparency = 0.85
GlassLayer.BorderSizePixel = 0
GlassLayer.ZIndex = 0

local UICornerGlass = Instance.new("UICorner", GlassLayer)
UICornerGlass.CornerRadius = UDim.new(0, 12)

-- Title
local Title = Instance.new("TextLabel")
Title.Parent = MainFrame
Title.Size = UDim2.new(1, -80, 0, 40)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "NN Hub - by NoName AKA"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 22
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize Button
local MinBtn = Instance.new("TextButton")
MinBtn.Parent = MainFrame
MinBtn.Size = UDim2.new(0, 30, 0, 30)
MinBtn.Position = UDim2.new(1, -70, 0, 7)
MinBtn.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
MinBtn.Text = "◻"
MinBtn.TextColor3 = Color3.fromRGB(50, 50, 50)
MinBtn.Font = Enum.Font.Gotham
MinBtn.TextSize = 16
local UICornerMin = Instance.new("UICorner", MinBtn)
UICornerMin.CornerRadius = UDim.new(0, 6)

-- Close Button
local CloseBtn = Instance.new("TextButton")
CloseBtn.Parent = MainFrame
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 7)
CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 90, 90)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 16
local UICornerClose = Instance.new("UICorner", CloseBtn)
UICornerClose.CornerRadius = UDim.new(0, 6)

-- Game Name
local GameName = Instance.new("TextLabel")
GameName.Parent = MainFrame
GameName.Size = UDim2.new(1, -10, 0, 18)
GameName.Position = UDim2.new(0, 0, 1, -20)
GameName.Text = "Anime Ranger X"
GameName.Font = Enum.Font.Gotham
GameName.TextSize = 13
GameName.TextColor3 = Color3.fromRGB(200, 200, 200)
GameName.TextXAlignment = Enum.TextXAlignment.Right
GameName.BackgroundTransparency = 1

-- ClickZone (icon hiển thị khi minimize)
local ClickZone = Instance.new("ImageButton")
ClickZone.Name = "ClickZone"
ClickZone.Parent = ScreenGui
ClickZone.Size = UDim2.new(0, 40, 0, 40)
ClickZone.Position = UDim2.new(0, 60, 0, 60)
ClickZone.BackgroundTransparency = 1
ClickZone.Image = "rbxassetid://128467874968339"
ClickZone.Visible = false
ClickZone.ZIndex = 1000
ClickZone.Active = true
ClickZone.Draggable = true

-- Minimize Logic
local isMinimized = false

local function minimize()
	isMinimized = true
	MainFrame.Visible = false
	ClickZone.Visible = true
end

local function maximize()
	isMinimized = false
	MainFrame.Visible = true
	ClickZone.Visible = false
	MainFrame.Position = defaultPos
end

MinBtn.MouseButton1Click:Connect(minimize)
ClickZone.MouseButton1Click:Connect(function()
	if isMinimized then
		maximize()
	end
end)

-- Confirmation Box
local ConfirmBox = Instance.new("Frame")
ConfirmBox.Parent = ScreenGui
ConfirmBox.Size = UDim2.new(0, 300, 0, 150)
ConfirmBox.Position = UDim2.new(0.5, -150, 0.5, -75)
ConfirmBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ConfirmBox.BackgroundTransparency = 0.6
ConfirmBox.Visible = false
ConfirmBox.ZIndex = 10
ConfirmBox.Active = true

local ConfirmTitle = Instance.new("TextLabel")
ConfirmTitle.Parent = ConfirmBox
ConfirmTitle.Size = UDim2.new(1, 0, 0, 50)
ConfirmTitle.Position = UDim2.new(0, 0, 0, 10)
ConfirmTitle.Text = "Bạn chắc chắn muốn tắt menu?"
ConfirmTitle.Font = Enum.Font.GothamBold
ConfirmTitle.TextSize = 18
ConfirmTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ConfirmTitle.BackgroundTransparency = 1
ConfirmTitle.TextWrapped = true

local YesBtn = Instance.new("TextButton")
YesBtn.Parent = ConfirmBox
YesBtn.Size = UDim2.new(0, 120, 0, 40)
YesBtn.Position = UDim2.new(0, 25, 0, 90)
YesBtn.Text = "Có"
YesBtn.BackgroundColor3 = Color3.fromRGB(50, 200, 100)
YesBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
YesBtn.Font = Enum.Font.Gotham
YesBtn.TextSize = 16
Instance.new("UICorner", YesBtn)

local NoBtn = Instance.new("TextButton")
NoBtn.Parent = ConfirmBox
NoBtn.Size = UDim2.new(0, 120, 0, 40)
NoBtn.Position = UDim2.new(0, 155, 0, 90)
NoBtn.Text = "Không"
NoBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
NoBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
NoBtn.Font = Enum.Font.Gotham
NoBtn.TextSize = 16
Instance.new("UICorner", NoBtn)

-- Hiện hộp xác nhận khi bấm X
CloseBtn.MouseButton1Click:Connect(function()
	ConfirmBox.Visible = true
end)

-- Nếu chọn Có
YesBtn.MouseButton1Click:Connect(function()
	MainFrame.Visible = false
	visible = false
	ConfirmBox.Visible = false
end)

-- Nếu chọn Không
NoBtn.MouseButton1Click:Connect(function()
	ConfirmBox.Visible = false
end)

-- Toggle bằng RightShift
UserInputService.InputBegan:Connect(function(input, gpe)
	if not gpe and input.KeyCode == OpenKey then
		visible = not visible
		MainFrame.Visible = visible
	end
end)

-- Fade-in
MainFrame.Visible = false
task.wait(0.4)
MainFrame.Visible = true
MainFrame.BackgroundTransparency = 1
for i = 1, 10 do
	MainFrame.BackgroundTransparency = 1 - (i * 0.075)
	task.wait(0.02)
end
MainFrame.BackgroundTransparency = 0.25

-- Tab Button: Server Stats
local StatsButton = Instance.new("TextButton")
StatsButton.Parent = MainFrame
StatsButton.Size = UDim2.new(0, 120, 0, 30)
StatsButton.Position = UDim2.new(0, 10, 0, 45)
StatsButton.BackgroundColor3 = Color3.fromRGB(100, 100, 255)
StatsButton.Text = "Server Stats"
StatsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StatsButton.Font = Enum.Font.GothamBold
StatsButton.TextSize = 14
Instance.new("UICorner", StatsButton)

-- Tab Content Frame: ServerStatsTab
local ServerStatsTab = Instance.new("Frame")
ServerStatsTab.Name = "ServerStatsTab"
ServerStatsTab.Parent = MainFrame
ServerStatsTab.Size = UDim2.new(1, -20, 1, -90)
ServerStatsTab.Position = UDim2.new(0, 10, 0, 80)
ServerStatsTab.BackgroundTransparency = 1
ServerStatsTab.Visible = false

-- Nội dung bên trong tab Server Stats

-- 1. Thông báo like & sub
local InfoLabel = Instance.new("TextLabel")
InfoLabel.Parent = ServerStatsTab
InfoLabel.Size = UDim2.new(1, 0, 0, 30)
InfoLabel.Position = UDim2.new(0, 0, 0, 0)
InfoLabel.Text = "Hãy like và sub cho NoNameAKA trên Youtube và TikTok"
InfoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoLabel.Font = Enum.Font.Gotham
InfoLabel.TextSize = 14
InfoLabel.BackgroundTransparency = 1

-- 2. Tên người chơi
local PlayerNameLabel = Instance.new("TextLabel")
PlayerNameLabel.Parent = ServerStatsTab
PlayerNameLabel.Size = UDim2.new(1, 0, 0, 25)
PlayerNameLabel.Position = UDim2.new(0, 0, 0, 40)
PlayerNameLabel.Text = "Tên người chơi: " .. game.Players.LocalPlayer.Name
PlayerNameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerNameLabel.Font = Enum.Font.Gotham
PlayerNameLabel.TextSize = 14
PlayerNameLabel.BackgroundTransparency = 1

-- 3. FPS (fake hiển thị hoặc bạn có thể thay đổi theo real-time nếu muốn)
local FPSLabel = Instance.new("TextLabel")
FPSLabel.Parent = ServerStatsTab
FPSLabel.Size = UDim2.new(1, 0, 0, 25)
FPSLabel.Position = UDim2.new(0, 0, 0, 70)
FPSLabel.Text = "FPS Server: 60"
FPSLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FPSLabel.Font = Enum.Font.Gotham
FPSLabel.TextSize = 14
FPSLabel.BackgroundTransparency = 1

-- 4. Server Time
local TimeLabel = Instance.new("TextLabel")
TimeLabel.Parent = ServerStatsTab
TimeLabel.Size = UDim2.new(1, 0, 0, 25)
TimeLabel.Position = UDim2.new(0, 0, 0, 100)
TimeLabel.Text = "Thời gian Server: " .. os.date("%H:%M:%S")
TimeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TimeLabel.Font = Enum.Font.Gotham
TimeLabel.TextSize = 14
TimeLabel.BackgroundTransparency = 1

-- 5. Số lượng người chơi
local PlayerCountLabel = Instance.new("TextLabel")
PlayerCountLabel.Parent = ServerStatsTab
PlayerCountLabel.Size = UDim2.new(1, 0, 0, 25)
PlayerCountLabel.Position = UDim2.new(0, 0, 0, 130)
PlayerCountLabel.Text = "Người chơi trong server: " .. tostring(#game.Players:GetPlayers())
PlayerCountLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerCountLabel.Font = Enum.Font.Gotham
PlayerCountLabel.TextSize = 14
PlayerCountLabel.BackgroundTransparency = 1

-- Cập nhật thời gian server & người chơi liên tục mỗi giây
task.spawn(function()
	while true do
		TimeLabel.Text = "Thời gian Server: " .. os.date("%H:%M:%S")
		PlayerCountLabel.Text = "Người chơi trong server: " .. tostring(#game.Players:GetPlayers())
		task.wait(1)
	end
end)

-- Hiển thị tab Server Stats khi nhấn nút
StatsButton.MouseButton1Click:Connect(function()
	-- Nếu có các tab khác, bạn cần ẩn nó tại đây (ví dụ: MainTab.Visible = false)
	ServerStatsTab.Visible = true
end)
